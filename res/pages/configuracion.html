

<script>

    $(document).ready(function () {
        $("#URL_SINCRONIZAR").val(syncServer);
    });

    function Test() {
        AjaxSAC(syncServer, "", true, function (callback) {
            alert(callback);
            if (callback == "Test Ok") {
                UsuariosDisponibles();
            }
        });

        for (var i = 0; i < 200; i++) {
            $("#NEWELEMENT").append("<a class='ui-btn cus-pri-ele' data-inline='true'>Guardar"+i+"</a><hr>");
        }
    }

    function UsuariosDisponibles() {
        AjaxSAC(syncServer + "/UsuariosDisponibles", "", true, function (callback) {
            var lista_usuarios = "<option value=''>Seleccionar Empleado</option>";
            var obj = jQuery.parseJSON(callback);
            $.each(obj, function (i, valor) {
                lista_usuarios = lista_usuarios + "<option value='" + valor.CODINTERNO + "'>" + unescape(valor.NOMBRE) +"</option>";
            });
            $("#lista_usuarios").html(lista_usuarios);
        });
    }

    function fijarUsuario(CODINTERNO, NOMBRE) {
        $("#CODIGOINTERNO").val(CODINTERNO);
        $("#NOMBRE").val(NOMBRE);
    }

    function GuardarConfiguracion() {
        if ($("#IDGOOGLE").val() == '')      { alert("Ingresar IDGOOGLE..."); $("#IDGOOGLE").focus(); return true; }
        if ($("#lista_usuarios").val() == '') { alert("Seleccionar Vendedor..."); $("#lista_usuarios").focus(); return true; }

        var dataPost = {
            CODIGOINTERNO: $("#lista_usuarios").val(),
            IDGOOGLE: $("#IDGOOGLE").val()
        };

        AjaxSAC(syncServer + "/GuardarConfiguracion", dataPost, true, function (callback) {
            if (callback == "Ok") {
                alert("Configuracion Exitosa");
                SyncExeReady($("#lista_usuarios").val(), 'SyncExeReady', function (RETORNO) {
                    //CREACION DE TIME CONTROL
                    BDActualizacion('CREATE TABLE IF NOT EXISTS APP_TIME (ULTIMAFECHA DATETIME null)');
                    BDActualizacion('DELETE FROM APP_TIME');
                    BDActualizacion('INSERT INTO APP_TIME VALUES("' + fecActual() + '")');
                    
                    //Sincronizacion General
                    SyncExe($("#lista_usuarios").val(),true, function (RETORNO) {
                        contentPage('pages/login.html');
                    });
                    
                    contentPage('pages/login.html');
                });
            } else {
                alert("No Se guardo el Registro... " + callback);
            }
        });
    }

</script>

<div role="main" class="ui-content jqm-content" style="margin: 20px;border: 1px solid #CCC;">

    <div class="btn-group" role="group" aria-label="..."><img src="img/Logo.png" style='width:30%; padding-bottom:10px;'></div>
    <div class="btn-group" role="group" aria-label="..." style="text-align:right; font-size:14px;">
        <strong style='font-size:15px; color:#005FAA; text-decoration:underline;'>Configuraci&oacute;n Inicial de Usuario</strong>
    </div>
    <hr />

    <div class="ui-grid-a">
        <div class="ui-block-a">
            <div class="ui-bar ui-bar-a" style="height:60px">
                <input type="text" name="URL_SINCRONIZAR" id="URL_SINCRONIZAR" >
            </div>
        </div>
        <div class="ui-block-b">
            <div class="ui-bar ui-bar-a" style="height:60px">
                <a class="ui-btn cus-pri-ele" data-inline="true" onclick="Test()">Test...</a>
            </div>
        </div>
    </div><!-- /grid-a -->

    <input type="hidden" class="form-control" aria-label="..." disabled="disabled" id='CODIGOINTERNO'>

    <br>
    <div class="ui-field-contain">
        <select name="lista_usuarios" id="lista_usuarios">
            <option value=''>Seleccionar Empleado</option>
        </select>
    </div>
    
    <br>
    
    <input type="text" name="IDGOOGLE" id="IDGOOGLE" value="" placeholder="ID GOOGLE" >
    
    <br>
    <input type="checkbox" name="ACEPTADISPOSE" id="ACEPTADISPOSE" checked disabled>
    <label for="chck-rememberme">Carga Inicial de datos...</label>
    
    <a class="ui-btn cus-pri-ele" data-inline="true">Guardar</a><hr>
    
    <div id="NEWELEMENT">
        
    </div>

</div>
    
